<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>花火？</title>
<style>
body{margin:0;overflow:hidden;background:black}
canvas{display:block}
</style>
</head>
<body>
<canvas id="fireworks"></canvas>
<script>
const canvas=document.getElementById("fireworks")
const ctx=canvas.getContext("2d")
canvas.width=window.innerWidth
canvas.height=window.innerHeight

class Particle{
  constructor(x,y,color){
    this.x=x
    this.y=y
    this.velX=(Math.random()-0.5)*5
    this.velY=(Math.random()-0.5)*5
    this.alpha=1
    this.color=color
  }
  update(){
    this.x+=this.velX
    this.y+=this.velY
    this.alpha-=0.02
  }
  draw(){
    ctx.globalAlpha=this.alpha
    ctx.fillStyle=this.color
    ctx.beginPath()
    ctx.arc(this.x,this.y,3,0,Math.PI*2)
    ctx.fill()
    ctx.globalAlpha=1
  }
}

let particles=[]
function createFirework(x,y){
  const colors=["red","yellow","blue","green","orange","pink","purple"]
  for(let i=0;i<50;i++){
    particles.push(new Particle(x,y,colors[Math.floor(Math.random()*colors.length)]))
  }
}

canvas.addEventListener("click",e=>{
  createFirework(e.clientX,e.clientY)
})

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.2)"
  ctx.fillRect(0,0,canvas.width,canvas.height)
  for(let i=particles.length-1;i>=0;i--){
    particles[i].update()
    particles[i].draw()
    if(particles[i].alpha<=0) particles.splice(i,1)
  }
  requestAnimationFrame(animate)
}

animate()
window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight})
</script>
</body>
</html>
